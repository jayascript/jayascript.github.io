<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>  Stydia Rising | JayaScript
</title>
  <link rel="canonical" href="/projects/stydia-rising.html">


  <link rel="stylesheet" href="/theme/css/bootstrap.min.css">
  <link rel="stylesheet" href="/theme/css/fontawesome.min.css">
  <link rel="stylesheet" href="/theme/css/pygments/default.min.css">
  <link rel="stylesheet" href="/theme/css/theme.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Raleway:wght@200&display=swap">

  
  <meta name="description" content="An analysis of Twitter reactions to the Teen Wolf S05E16 premiere.">


</head>

<body>
  <header class="header">
    <div class="container">
<div class="row">

    <div class="col-sm-1 siteimagediv">
      <p align="center">
        <a href="/">
          <img class="img-fluid rounded" id="siteimage" src=/images/data.png alt="JayaScript">
        </a><img src="" alt="" width="100%" height="" style="">
      </p>
    </div>

  <div class="col-sm-8 titlediv">
    <h1 class="title"><a href="/">JayaScript</a></h1>
    <p class="text-muted" id="sitesubtitle">Linux · Python · Developer · Analytics</p>
  </div>

    <div class="col-sm-4 link_box">
      <ul class="list-inline">
        <li class="list-inline-item"><a href="/index.html"><i class="fa fa-home"></i></a></li>
        <li class="list-inline-item"><a href="/categories.html"><i class="fa fa-code"></i></a></li>
        <li class="list-inline-item"><a href="/pages/about.html"><i class="fa fa-user-circle"></i></a></li>
        <li class="list-inline-item"><a href="/pages/contact.html"><i class="fa fa-envelope"></i></a></li>
          <li class="list-inline-item"><a class="fab fa-github" href="https://github.com/jayascript/" target="_blank"></a></li>
          <li class="list-inline-item"><a class="fab fa-twitter" href="https://twitter.com/jayascript" target="_blank"></a></li>
          <li class="list-inline-item"><a class="fab fa-linkedin" href="https://www.linkedin.com/in/jayazhane/" target="_blank"></a></li>
          <li class="list-inline-item"><a class="fa fa-book" href="https://realpython.com/team/jayazhane/" target="_blank"></a></li>
        <!--           <li class="list-inline-item"><a href="/" target="_blank">Home</a></li>
          <li class="list-inline-item"><a href="/categories.html" target="_blank">Categories</a></li>

              <li class="list-inline-item text-muted">|</li>
            <li class="list-inline-item"><a href="/pages/about.html">About</a></li>
            <li class="list-inline-item"><a href="/pages/contact.html">Contact</a></li>
         -->
      </ul>

  </div>

</div>    </div>
  </header>

  <div class="main">
    <div class="container">
      <h1>  Stydia Rising
</h1>
      <hr>
  <article class="article">
    <header>
      <ul class="list-inline">
        <li class="list-inline-item text-muted">
          <i class="fas fa-calendar" aria-hidden="true"></i>
          2016-05-01
        </li>
        <li class="list-inline-item text-muted">
          <i class="fas fa-folder-open" aria-hidden="true"></i>
          <a href="/category/projects.html">Projects</a>
        </li>
          <li class="list-inline-item text-muted">
            <i class="fas fa-tag"></i>
              <a href="/tag/data-analysis.html">#data analysis</a>,               <a href="/tag/python.html">#python</a>,               <a href="/tag/sql.html">#sql</a>,               <a href="/tag/tableau.html">#tableau</a>,               <a href="/tag/twitter.html">#twitter</a>          </li>
      </ul>
    </header>
    <p align="center">
        <picture>
          <img id="cover" width="100%" src="/images/articles/stydia-rising/Stydia Premiere hashtags limit 1.png" alt="Stydia Rising">
        </picture>
    </p>
    <div class="content">
      <h1>An Analysis of Twitter Reactions to the Teen Wolf S05E16 Premiere</h1>
<p>This is my first data analysis project, completed in partial fulfillment of the requirements for the University of Michigan's Python Specialization program on Coursera.</p>
<p>The project is a spin-off of a Super Bowl 50 Twitter analysis that I came across while doing some research. I was particularly excited at the way they correlated the winning moment in the game to the spike in tweets that occurred at the same time. I wanted to adapt their project to my own domain: a favorite TV show of mine that had recently experienced a similar elation-inducing moment.</p>
<h2>Directory</h2>
<p>Click the section you would like to jump to:</p>
<ul>
<li><a href="#description">Description</a></li>
<li><a href="#data">Data</a><ul>
<li><a href="#discovery">Discovery</a></li>
<li><a href="#download">Download</a></li>
<li><a href="#dissection">Dissection</a></li>
</ul>
</li>
<li><a href="#discussion">Discussion</a><ul>
<li><a href="#debug">Debug</a></li>
<li><a href="#directions">Directions</a></li>
</ul>
</li>
<li><a href="#disseminate">Disseminate</a></li>
</ul>
<h2><a id="description"></a>Description</h2>
<p>I analyzed 80,000+ tweets tagged #TeenWolf and 34,000+ tweets tagged #Stydia. "Stydia" is the blended couple name of Stiles and Lydia, two characters on the MTV drama Teen Wolf. Many fans of the show "ship" these two couples; short for "relationship," to "ship" someone means to hope that they will officially get together on the show.</p>
<p>In the "Lie Ability" (S05E16) episode of Teen Wolf, Stiles and Lydia share a moment together that could very well indicate them becoming an official couple at some time in the future. During the show, Stiles attempts to rescue Lydia, who encourages him to leave her since what he's trying to do is dangerous. Stiles tells Lydia to "please shut up and let [him] save [her] life." Fans refer to this kind of moment as the point when their ship "rises," i.e. gains legitimacy. Thus, this project is an analysis of the moment when "Stydia" started "rising."</p>
<p>I was curious to see how Twitter reacted during that moment on Teen Wolf. Would there be a spike in tweets similar to the moment when the Broncos won the Super Bowl? Here are a few other questions I wanted to answer:</p>
<ul>
<li>Can we classify a tweet as pro-Stydia or the reverse?</li>
<li>Can we see an increase in tweets at the point where Stydia rises?</li>
<li>What were the trending hashtags throughout the week?</li>
<li>What hashtags were most frequently used along with #TeenWolf?</li>
<li>Does the pattern of reaction repeat over several hours across the U.S. as the show airs in each respective timezone?</li>
<li>What was the overall sentiment during the episode?</li>
</ul>
<h2><a id="data"></a>Data</h2>
<h3><a id="discovery"></a>Discovery</h3>
<p>Before I started my project, I needed to <strong>make sure that the data was even available</strong> for collection. This is something that has slowed me down with previous projects. I started this project in March 2016, and the episode in question occurred at 9:00 PM EST on February 9, 2016.</p>
<p>I immediately his a roadblock. Twitter's API will only allow you to get tweets from no more than 7 days in the past. The tweets I wanted had occurred over a month before. At this point, <strong>I was very tempted to give up.</strong> I can't get the data, so I can't do the project, right?</p>
<p>Still, this was something I <em>really</em> wanted to look into, so I kept searching for a solution. Eventually I found one: <a href="https://github.com/Jefferson-Henrique/GetOldTweets-python/">a Python project</a> that bypassed Twitter's API and used a browser search to pull past tweets.</p>
<p>Unfortunately, I hit a second roadblock when I realized that this program <strong>wasn't doing exactly what I needed.</strong> I wanted to cull tens of thousands of tweets, and it was taking me an unnecessarily long time to do it. I realized that his program was storing all of the tweets in a list and then retrieving them one by one; this was a terrible burden on my computer's memory that caused it to stall out more often than not.</p>
<p>I had to sit down and go the program to figure out where this was happening, and then I had to <strong>figure out how to insert my own code</strong> into it to get the program to do what I needed it to do.</p>
<p>Finally I was able to get the program to write the tweets out to an SQLite3 database in real time. In this way I culled 80,000+ tweets for the #TeenWolf hashtag over the course of 6 days, and 34,000+ tweets for the #Stydia hashtag over the same period of time.</p>
<h3><a id="download"></a>Download</h3>
<p>The coding portion of the project consisted of creating scripts to pull the tweets and write them to a database. Once I started the analysis, I create a few more scripts to help clean the data up and pull out the most important tweets.</p>
<p>Below is the code I added to the GetOldTweets program <code>TweetManager.py</code> file to write the tweets to a database:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">getTweets</span><span class="p">(</span><span class="n">tweetCriteria</span><span class="p">):</span>
  <span class="n">refreshCursor</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
  <span class="c1"># tweetDB = raw_input(&quot;Please enter database name: &quot;)</span>
  <span class="n">connect</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;Stydia_Tweets.sqlite&quot;</span><span class="p">)</span>
  <span class="n">cur</span> <span class="o">=</span> <span class="n">connect</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
  <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>

  <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">      INSERT OR IGNORE INTO Tweets (</span>
<span class="s1">        tweet_id, tweet_user, tweet_text, tweet_date, tweet_hash, tweet_RTs,</span>
<span class="s1">        tweet_faves, tweet_ment, tweet_loc, tweet_link</span>
<span class="s1">      ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )&#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span>
        <span class="n">tweet</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">tweet</span><span class="o">.</span><span class="n">username</span><span class="p">,</span> <span class="n">tweet</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">tweet</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">tweet</span><span class="o">.</span><span class="n">hashtags</span><span class="p">,</span>
        <span class="n">tweet</span><span class="o">.</span><span class="n">retweets</span><span class="p">,</span> <span class="n">tweet</span><span class="o">.</span><span class="n">favorites</span><span class="p">,</span> <span class="n">tweet</span><span class="o">.</span><span class="n">mentions</span><span class="p">,</span> <span class="n">tweet</span><span class="o">.</span><span class="n">geo</span><span class="p">,</span>
        <span class="n">tweet</span><span class="o">.</span><span class="n">permalink</span>
      <span class="p">)</span>
    <span class="p">)</span>
    <span class="n">connect</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="o">...</span>
</pre></div>


<p>I connected my script to the file, using it as a go-between from the program to the database.</p>
<p>My script is below:</p>
<div class="highlight"><pre><span></span><span class="k">print</span> <span class="s2">&quot;Project: Stydia Rising&quot;</span>
<span class="k">print</span> <span class="s2">&quot;Object: Collect tweets.&quot;</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="c1"># Appends the GetOldTweets manager so that I can import it</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;C:\Users\jzp93\GetOldTweets-python-master&quot;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">got</span>
<span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="kn">import</span> <span class="nn">datetime</span>

<span class="c1"># tweetDB = raw_input(&quot;Please enter database name: &quot;)</span>
<span class="n">connect</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;Stydia_Tweets.sqlite&quot;</span><span class="p">)</span>
<span class="n">cur</span> <span class="o">=</span> <span class="n">connect</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="c1"># Creates the database</span>
<span class="n">cur</span><span class="o">.</span><span class="n">executescript</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">  CREATE TABLE IF NOT EXISTS Tweets (</span>
<span class="s1">    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE,</span>
<span class="s1">    tweet_id INTEGER,</span>
<span class="s1">    tweet_user TEXT,</span>
<span class="s1">    tweet_text TEXT,</span>
<span class="s1">    tweet_date TEXT,</span>
<span class="s1">    tweet_hash TEXT,</span>
<span class="s1">    tweet_RTs TEXT,</span>
<span class="s1">    tweet_faves TEXT,</span>
<span class="s1">    tweet_ment TEXT,</span>
<span class="s1">    tweet_loc TEXT,</span>
<span class="s1">    tweet_link TEXT);</span>
<span class="s1">  &#39;&#39;&#39;</span><span class="p">)</span>

<span class="c1"># Included time to track how long it took to collect data</span>
<span class="k">print</span> <span class="s2">&quot;Start: &quot;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y/%m/</span><span class="si">%d</span><span class="s1"> %H:%M:%S&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="s2">&quot;Working...&quot;</span>

<span class="c1"># User inputs which search term to query, i.e. &quot;stydia&quot; or &quot;teenwolf&quot;</span>
<span class="n">query</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s2">&quot;Please enter search term: &quot;</span><span class="p">)</span>

<span class="c1"># From when to when? In my case, from 2016-02-08 until 2016-02-13.</span>
<span class="n">start</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s2">&quot;Please enter start date in YYYY-MM-DD format: &quot;</span><span class="p">)</span>
<span class="n">end</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s2">&quot;Please enter end date in YYYY-MM-DD format: &quot;</span><span class="p">)</span>

<span class="c1"># Taken straight from GOT documentation. Calls the got manager and creates</span>
<span class="c1"># a search query, much like you would do through Twitter&#39;s advanced search.</span>
<span class="n">tweetCriteria</span> <span class="o">=</span> <span class="n">got</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">TweetCriteria</span><span class="p">()</span><span class="o">.</span><span class="n">setQuerySearch</span><span class="p">(</span>
  <span class="n">query</span><span class="p">)</span><span class="o">.</span><span class="n">setSince</span><span class="p">(</span><span class="n">start</span><span class="p">)</span><span class="o">.</span><span class="n">setUntil</span><span class="p">(</span><span class="n">end</span><span class="p">)</span>

<span class="c1"># Used the following to check that the code was running. Commented it out for</span>
<span class="c1"># faster output.</span>
<span class="n">tweet_info</span> <span class="o">=</span> <span class="n">got</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">TweetManager</span><span class="o">.</span><span class="n">getTweets</span><span class="p">(</span><span class="n">tweetCriteria</span><span class="p">)</span>
<span class="k">print</span> <span class="n">tweet_info</span>

<span class="k">print</span> <span class="s2">&quot;Complete.&quot;</span>
<span class="k">print</span> <span class="s2">&quot;End: &quot;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y/%m/</span><span class="si">%d</span><span class="s1"> %H:%M:%S&#39;</span><span class="p">)</span>
</pre></div>


<p>The script produced a database of the following format:</p>
<p align="center">
  <img src="/images/articles/stydia-rising/Tweets DB TeenWolf.png" alt="Tweets DB TeenWolf" width="100%">
  <p style="text-align:center;"><sup><em>Database containing tweets tagged or mentioning #teenwolf. 80,765 tweets collected from Feb. 8, 2016 to Feb. 13, 2016. All dates and times are Japan Standard Time. Note records 48,269 and 48,278 which refer to "Stydia rising."</em></sup>
  </p>
</p>

<p align="center">
  <img src="/images/articles/stydia-rising/Tweets DB Stydia.png" alt="Tweets DB Stydia" width="100%">
  <p style="text-align:center;"><sup><em>Database containing tweets tagged or mentioning #stydia. 34,348 tweets collected from Feb. 7, 2016 to Feb. 13, 2016. All dates and times are Japan Standard Time.</em></sup>
  </p>
</p>

<h3><a id="dissection"></a>Dissection</h3>
<p>As I'm still currently taking machine learning courses, I'm not yet at the point where I feel comfortable performing sentiment analysis on the data. As such, those questions (whether a tweet is pro- or anti-Stydia, what the overall sentiment during the episode premiere was) will have to be saved for future research endeavors.</p>
<p>However, I was able to answer most of my original questions, as well as some other questions that I developed during the analysis.</p>
<p>Following in the footsteps of the <a href="http://blog.aylien.com/post/140037240328/super-bowl-50-according-to-twitter-sentiment">Super Bowl 50 Analysis</a>, I used Tableau to visualize my results.</p>
<h4>Can we see an increase in tweets at the point where Stydia rises?</h4>
<p>Undoubtedly, the answer is yes.</p>
<p>Below is a visualization of the tweet volume over time during the S05E16 premiere:</p>
<p align="center">
  <img src="/images/articles/stydia-rising/Tweets During 5x16 Premiere.png" alt="Tweets During 5x16 Premiere" width="50%" height="" style="">
  <p style="text-align:center;"><sup><em></em></sup>
  </p>
</p>

<p>There is an obvious spike in Twitter activity at around the 0:44 minute mark. This coincides with the exact scene during the premiere where Stiles says, "Lydia, please shut up and let me save your life." As Stydia fans in particular would react heavily to this scene, cross-referencing the #TeenWolf tweets with #Stydia tweets serve to bolster the argument that the Stydia scene is what everyone was reacting to. (A look at the database images above will show that this is indeed what fans were tweeting about at that moment.)</p>
<p>One of my original questions was whether or not this spike in reaction repeated itself throughout the week. Many shows will premiere at 9 PM in each subsequent time zone - meaning EST viewers will see the show before PST ones. However, this does not seem to be the case for <em>Teen Wolf</em>: of the 80,000 or so tweets pulling during the week, <strong>20,000 occurred during the hour of the 9 PM EST time slot alone</strong>, suggesting that the show airs at the same time across the US (indeed, a quick google search shows that <em>Teen Wolf</em> airs at 6 PM PST).</p>
<p align="center">
  <img src="/images/articles/stydia-rising/TW week of.png" alt="Teen Wolf week of tweets" width="50%" height="" style="">
  <p style="text-align:center;"><sup><em>Spike in tweets during the S05E16 premiere only (9 PM EST~6 PM PST Feb. 9, corresponding 11 AM JST Feb. 10). Suggesting that S05E16 premiered in all time zones simultaneously.</em></sup>
  </p>
</p>

<h4>What were the most retweeted and liked tweets?</h4>
<p>I used the following script to get the top 10 retweeted and liked tweets and write the links out to a text file:</p>
<div class="highlight"><pre><span></span><span class="c1"># -*- coding: UTF-8 -*-</span>
<span class="kn">import</span> <span class="nn">sqlite3</span>

<span class="k">print</span> <span class="s2">&quot;Starting.&quot;</span>

<span class="c1"># connect = sqlite3.connect(&quot;TeenWolf_Tweets.sqlite&quot;)</span>
<span class="n">connect</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;Stydia_Tweets.sqlite&quot;</span><span class="p">)</span>
<span class="n">cur</span> <span class="o">=</span> <span class="n">connect</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">  SELECT tweet_RTs, tweet_faves, tweet_ment, tweet_link FROM Tweets</span>
<span class="s1">  WHERE tweet_date BETWEEN &quot;2016-02-10 11:00:00&quot; AND &quot;2016-02-10 11:59:59&quot;</span>
<span class="s1">  ORDER BY cast(tweet_RTs as int) DESC LIMIT 10&#39;&#39;&#39;</span>
  <span class="p">)</span>

<span class="n">fhand</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;StydiaFaves.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>

<span class="n">fhand</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Top Ten Retweets:</span><span class="se">\n\r</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">index</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
  <span class="n">fhand</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="n">fhand</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;RTs: &quot;</span> <span class="o">+</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="n">fhand</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Faves: &quot;</span> <span class="o">+</span> <span class="n">line</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="n">fhand</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Mentions: &quot;</span> <span class="o">+</span> <span class="n">line</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="n">fhand</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Link: &quot;</span> <span class="o">+</span> <span class="n">line</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n\r</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>

<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">  SELECT tweet_RTs, tweet_faves, tweet_ment, tweet_link FROM Tweets</span>
<span class="s1">  WHERE tweet_date BETWEEN &quot;2016-02-10 11:00:00&quot; AND &quot;2016-02-10 11:59:59&quot;</span>
<span class="s1">  ORDER BY cast(tweet_faves as int) DESC LIMIT 10&#39;&#39;&#39;</span>
<span class="p">)</span>

<span class="n">fhand</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\r</span><span class="s2">Top Ten Faves:</span><span class="se">\n\r</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">index</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
  <span class="n">fhand</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="n">fhand</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;RTs: &quot;</span> <span class="o">+</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="n">fhand</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Faves: &quot;</span> <span class="o">+</span> <span class="n">line</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="n">fhand</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Mentions: &quot;</span> <span class="o">+</span> <span class="n">line</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="n">fhand</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Link: &quot;</span> <span class="o">+</span> <span class="n">line</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n\r</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>

<span class="n">fhand</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">print</span> <span class="s2">&quot;Done.&quot;</span>
</pre></div>


<p>I was a bit off with the newlines, but I could read the results, so I didn't change it.</p>
<p>Here are some of the results:</p>
<h5>Top 5 #Stydia Tweets</h5>
<blockquote class="twitter-tweet">
<p dir="ltr" lang="en">Too many RT <a href="https://twitter.com/xxlaliter">@xxlaliter</a>: <a href="https://twitter.com/hollandroden">@hollandroden</a> FAVORITE STYDIA SCENE?!</p>
— holland roden (@hollandroden) <a href="https://twitter.com/hollandroden/status/697251993761386496">February 10, 2016</a></blockquote>

<blockquote class="twitter-tweet">
<p dir="ltr" lang="en">STYDIA HAS LITERALLY BEEN THERE SINCE THE BEGINNING AND IT AIN'T GOIN' ANYWHERE. <a href="https://twitter.com/hashtag/TEENWOLF?src=hash">#TEENWOLF</a></p>
— Tyler Hoechlin Army (@HoechlinArmy) <a href="https://twitter.com/HoechlinArmy/status/697250432708513792">February 10, 2016</a></blockquote>

<blockquote class="twitter-tweet">
<p dir="ltr" lang="en">Stiles asking Lydia to "wake up" is the new Ryan asking Marissa to "wake up" in Tijuana <a href="https://twitter.com/hashtag/TeenWolf?src=hash">#TeenWolf</a> <a href="https://twitter.com/hashtag/TheOC?src=hash">#TheOC</a> <a href="https://twitter.com/hashtag/Stydia?src=hash">#Stydia</a> <a href="https://t.co/K7xVxsKvW2">pic.twitter.com/K7xVxsKvW2</a></p>
— Samantha Highfill (@samhighfill) <a href="https://twitter.com/samhighfill/status/697252830021701632">February 10, 2016</a></blockquote>

<blockquote class="twitter-tweet">
<p dir="ltr" lang="en">Scott is the number one Stydia shipper <a href="https://twitter.com/hashtag/TeenWolf?src=hash">#TeenWolf</a></p>
— Becky | TW IS LIT (@xBreeTanner) <a href="https://twitter.com/xBreeTanner/status/697253454763286529">February 10, 2016</a></blockquote>

<blockquote class="twitter-tweet">
<p dir="ltr" lang="en">That Stydia scene had me like <a href="https://twitter.com/hashtag/TeenWolf?src=hash">#TeenWolf</a> <a href="https://t.co/dO4UYEM12p">pic.twitter.com/dO4UYEM12p</a></p>
— J (@dylanogposey) <a href="https://twitter.com/dylanogposey/status/697250893662650369">February 10, 2016</a></blockquote>

<p>Those are the Stydia tweets. Now what about the ones that mention #TeenWolf...?</p>
<h5>Top 5 #TeenWolf Tweets</h5>
<blockquote class="twitter-tweet">
<p dir="ltr" lang="en">"Please shut up and let me save your life." OMG HELP <a href="https://twitter.com/hashtag/TeenWolf?src=hash">#TeenWolf</a> <a href="https://t.co/YIRU9ztQk5">https://t.co/YIRU9ztQk5</a></p>
— TEEN WOLF (@MTVteenwolf) <a href="https://twitter.com/MTVteenwolf/status/697249631022006272">February 10, 2016</a></blockquote>

<blockquote class="twitter-tweet">
<p dir="ltr" lang="en">"Stiles saved me." THE TEARS WON'T STOP <a href="https://twitter.com/hashtag/TeenWolf?src=hash">#TeenWolf</a> <a href="https://t.co/DT22msCIH1">pic.twitter.com/DT22msCIH1</a></p>
— TEEN WOLF (@MTVteenwolf) <a href="https://twitter.com/MTVteenwolf/status/697253292980768771">February 10, 2016</a></blockquote>

<blockquote class="twitter-tweet">
<p dir="ltr" lang="en">YALL I AM AN EMOTIONAL MESS AND NO, IM NOT OKAY <a href="https://twitter.com/hashtag/TeenWolf?src=hash">#TeenWolf</a></p>
— TEEN WOLF (@MTVteenwolf) <a href="https://twitter.com/MTVteenwolf/status/697252749323407360">February 10, 2016</a></blockquote>

<blockquote class="twitter-tweet">
<p dir="ltr" lang="en">STOP IM CRYING WTF <a href="https://twitter.com/hashtag/TeenWolf?src=hash">#TeenWolf</a></p>
— TEEN WOLF (@MTVteenwolf) <a href="https://twitter.com/MTVteenwolf/status/697252958061404164">February 10, 2016</a></blockquote>

<blockquote class="twitter-tweet">
<p dir="ltr" lang="ht">LOLOLOL LIAM <a href="https://twitter.com/hashtag/TeenWolf?src=hash">#TeenWolf</a> <a href="https://t.co/1CuShuC7s6">pic.twitter.com/1CuShuC7s6</a></p>
— TEEN WOLF (@MTVteenwolf) <a href="https://twitter.com/MTVteenwolf/status/697245304186339328">February 10, 2016</a></blockquote>

<p>Stydia for the win! 4 out of 5 of the most liked and retweeted tweets tagged #TeenWolf are in reference to Stydia. The most popular tweet even explicitly mentions Stiles' line, "Lydia, please shut up and let me save your life."</p>
<p>The most popular #TeenWolf tweets are also those tweeted by the official show Twitter, @MTVteenwolf. This makes sense, as many die-hard fans would love a chance to interact with show officials, even if it's something as simple as retweeting. In addition, many fans appreciate show officials tweeting their reactions to the show as well. In fact, the show creator as well as several of the actors frequently interact with their fans on Twitter, so it should come as no surprise that the most liked tweets come from the official MTV account.</p>
<h4>What were the most popular hashtags during the premiere?</h4>
<p>In addition to the most popular tweets, I was interested in the most popular hashtags used throughout the week. When first scrolling through the data, I noticed many hashtags (like #webelieveinstydia and #StydiaIsRising) that I hadn't expected.</p>
<p>The script I used to count the hashtags can be found below:</p>
<div class="highlight"><pre><span></span><span class="c1"># -*- coding: UTF-8 -*-</span>
<span class="kn">import</span> <span class="nn">sqlite3</span>

<span class="k">print</span> <span class="s2">&quot;Starting.&quot;</span>

<span class="n">connect</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;TeenWolf_Tweets.sqlite&quot;</span><span class="p">)</span>
<span class="c1"># connect = sqlite3.connect(&quot;Stydia_Tweets.sqlite&quot;)</span>
<span class="n">cur</span> <span class="o">=</span> <span class="n">connect</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="n">connect2</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;TW_Hashtags_PREMIERE.sqlite&quot;</span><span class="p">)</span>
<span class="c1"># connect2 = sqlite3.connect(&quot;Stydia_Hashtags_PREMIERE.sqlite&quot;)</span>
<span class="n">cur2</span> <span class="o">=</span> <span class="n">connect2</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="n">cur2</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;DROP TABLE IF EXISTS Hashtags &#39;&#39;&#39;</span><span class="p">)</span>

<span class="n">cur2</span><span class="o">.</span><span class="n">executescript</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">  CREATE TABLE IF NOT EXISTS Hashtags (</span>
<span class="s1">    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE,</span>
<span class="s1">    hashtag TEXT,</span>
<span class="s1">    num_users INTEGER);&#39;&#39;&#39;</span><span class="p">)</span>

<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">  SELECT tweet_hash FROM TeenWolf_Tweets WHERE tweet_date</span>
<span class="s1">  BETWEEN &quot;2016-02-10 11:00:00&quot; AND &quot;2016-02-10 11:59:59&quot;&#39;&#39;&#39;</span><span class="p">)</span>

<span class="n">hashtags</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">get_hashtags</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
  <span class="c1"># Split the first index of the list (the hashtags) on the (#) symbol</span>
  <span class="n">item</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">)</span>
  <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">item</span><span class="p">:</span>
    <span class="c1"># Ignore empty values</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
      <span class="c1"># Consolidates TeenWolf, teenwolf, TEENWOLF all as one hashtag</span>
      <span class="n">tag</span> <span class="o">=</span> <span class="n">tag</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
      <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Add the hashtag to the dictionary</span>
        <span class="n">hashtags</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">hashtags</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
      <span class="k">except</span><span class="p">:</span>
        <span class="n">hashtags</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1"># item is a list of values from the database; in this case, hashtags</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
  <span class="c1"># ignore entries with no hashtags</span>
  <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&amp;</span><span class="n">amp</span><span class="p">;</span><span class="n">amp</span><span class="p">;</span><span class="n">amp</span><span class="p">;</span><span class="n">gt</span><span class="p">;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">get_hashtags</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">hashtags</span><span class="p">:</span>
  <span class="n">cur2</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">  INSERT OR IGNORE INTO Hashtags (hashtag, num_users) VALUES (?, ?)&#39;&#39;&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">hashtags</span><span class="p">[</span><span class="n">item</span><span class="p">]))</span>
  <span class="n">connect2</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

<span class="n">connect2</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="k">print</span> <span class="s2">&quot;Done.&quot;</span>
</pre></div>


<p>I wrote the output to a database and imported it into Tableau in order to create a word cloud to visualize the frequencies.</p>
<p><strong>Most Frequently Used Hashtags Along with #TeenWolf During the S05E16 Premiere</strong></p>
<p align="center">
  <img src="/images/articles/stydia-rising/TW Premiere hashtags limit 2.png" alt="TW Premiere hashtags" width="100%" height="" style="">
  <p style="text-align:center;"><sup><em>Showing hashtags used along with #TeenWolf during the hour of the S05E16 premiere. Hashtags with at least 2 counts are included.</em></sup>
  </p>
</p>

<p><strong>Most Frequently Used Hashtags Along with #Stydia During the S05E16 Premiere</strong></p>
<p align="center">
  <img src="/images/articles/stydia-rising/Stydia Premiere hashtags limit 1.png" alt="Stydia Premiere hashtags" width="100%" height="" style="">
  <p style="text-align:center;"><sup><em>Showing hashtags used along with #Stydia during the hour of the S05E16 premiere. Hashtags with at least 1 count are included.</em></sup>
  </p>
</p>

<p>One of my original questions was to see what the trending hashtags were throughout the week. The visualizations for these are below.</p>
<p><strong>Most Frequently Used Hashtags Along with #TeenWolf (Feb. 8 - Feb. 13 JST)</strong></p>
<p align="center">
  <img src="/images/articles/stydia-rising/TW Week of Hashtags limit 10.png" alt="TW Week of Hashtags limit 10" width="100%" height="" style="">
  <p style="text-align:center;"><sup><em>Showing hashtags used along with #TeenWolf during the week of Feb. 8 to Feb. 13. Hashtags with at least 10 counts are included.</em></sup>
  </p>
</p>

<p><strong>Most Frequently Used Hashtags Along with #Stydia (Feb. 7 - Feb. 13 JST)</strong></p>
<p align="center">
  <img src="/images/articles/stydia-rising/Stydia Week of Hashtags limit 5.png" alt="Stydia Week of Hashtags limit 5" width="100%" height="" style="">
  <p style="text-align:center;"><sup><em>Showing hashtags used along with #Stydia during the week of Feb. 7 to Feb. 13. Hashtags with at least 5 counts are included.</em></sup>
  </p>
</p>

<p>Hashtags during the premiere of course focused on what was going on in the show (i.e. #puppystyle, #EscapeFromEichen). There was also a live chat going on with Holland Roden, the actress who plays Lydia, so #askholland was trending during the show as well.</p>
<p>However, as we look towards the rest of the week other hashtags start to crop up - for example, #KCA and #TheShannara#Chronicles - as viewers reference <em>Teen Wolf</em> in relation to other shows they watch (as well as to the Kids Choice Awards, which at the time were coming up in a few weeks).</p>
<p>Furthermore, the all-week #TeenWolf and #Stydia clouds show two very interesting hashtags: #BancoDeSeries and #TeenWolfPoland, respectively. I found out through my analysis that not only was <em>Teen Wolf</em> popular in the States; it seemed to have a sizable following worldwide!</p>
<h4>Where else in the world was S05E16 watched?</h4>
<p>I took the tweets for which location data was available and output their counts to a database using a modified version of the <code>hashtags.py</code> script. I then visualized the results on a map in Tableau. Note that I could only plot tweets for which location data was available; less than 4% of all tweets. However, the visualization did show me that <em>Teen Wolf</em> is indeed an international phenomenon.</p>
<p align="center">
  <img src="/images/articles/stydia-rising/5x16 Around the World.png" alt="Teen Wolf around the world" width="100%" height="" style="">
  <p style="text-align:center;"><sup><em></em></sup>
  </p>
</p>

<h2><a id="discussion"></a>Discussion</h2>
<p>I managed to answer most of my pressing questions. I successfully visualized Twitter data for my favorite show during one of the most influential episodes for Stydia shippers. I was able to make a contribution to my fandom and I am very proud of myself for that. I also learned how to use a new tool (Tableau) with which I felt quite uncomfortable at first, but with more practice I quickly got the hang of it.</p>
<p>Overall I am very happy with this project and consider it a great success!</p>
<h3><a id="debug"></a>Debug</h3>
<ol>
<li><strong>It took entirely too long to get the GOT program working.</strong> I spent way more time than necessary trying to pull the tweets. The very first thing I should have done when using somebody else's program is go through and read the code to see what it does. GOT has very little documentation so this should have been even more pressing. Next time I'll be sure to keep this in mind.</li>
<li><strong>I did not calculate how much RAM I would need to run the program.</strong> When I was first working with the GOT model I kept getting disk I/O errors and my laptop kept stalling out. Of course once I got the tweets to write out to a DB in real time this wasn't an issue, but I think it's important to learn how to calculate RAM and such for when I will need it in the future.</li>
<li><strong>The project needed more organization.</strong> Of course at the beginning I could not imagine the number of tweets I would get; the scope of the project evaded me at that time. While I did have separate directories for the code, the data, the documentation and the output, I could have done a better job keeping in its place. I ended up with a lot of files in the end, and a consistent naming scheme, for example, could have saved me a lot of confusion. I also may have benefited from using version control this time around. That is something I look forward to working more with in future projects.</li>
<li><strong>The project needed clearer definition.</strong> All I knew was that I wanted to get tweets and I wanted to look at them at one point in time. I didn't specify at the beginning how many tweets I wanted to collected, the date and time I wanted them to be from, and what exactly I wanted to do with them. I ended up collecting more data than I needed (which is not necessarily a bad thing), and writing extra scripts towards the end of the analysis to do things I hadn't thought of before. While this is to be expected, next time I look forward to created a solid project plan so that I can know more clearly what I want to do with my data before I get it.</li>
</ol>
<h3><a id="directions"></a>Directions</h3>
<ol>
<li><strong>Perform sentiment analysis on the dataset.</strong> This is something that I got from the Super Bowl 50 analysis that I wanted to try for myself. What was the overall sentiment during the S05E16 episode? Did it change over time? Can we tell if a tweet is pro- or anti-Stydia? Fandom has interesting ways of representing positive sentiment (for example, the phrase "STYDIA VINES HURT SO MUCH" should actually be interpreted positively), so I wonder how current text analytics tools would work on fandom-derived data.</li>
<li><strong>Consolidate the scripts into a seamless program.</strong> This wasn't something I set out to do, but I think it could be helpful. I know that lots of programs exist already to perform Twitter analysis, but I might like to challenge myself by creating a version of my own.</li>
<li><strong>Issue a pull request to the GOT model.</strong> I found it very helpful to be able to write the tweets out to a database in real time instead of reading them all into memory. I know that there are others out there who may also need to pull tens of thousands of tweets that were written in the past. I hope to adapt my code to a general usage and issue a pull request to the GOT model on GitHub so that others can benefit from this as well.</li>
</ol>
<h2><a id="disseminate"></a>Disseminate</h2>
<ul>
<li><a href="http://blog.aylien.com/post/140037240328/super-bowl-50-according-to-twitter-sentiment">Aylien's Super Bowl 50 Analysis</a></li>
<li><a href="https://public.tableau.com/s/">Tableau Public Visualization Tool</a></li>
<li><a href="https://public.tableau.com/profile/jaya.z.powell">My interactive "Stydia Rising" dashboard on Tableau</a></li>
<li><a href="https://github.com/Jefferson-Henrique/GetOldTweets-python/">The Python model I used to get old tweets</a></li>
</ul>
    </div>
  </article>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
<div class="row">
  <ul class="col-sm-6 list-inline">
    <li class="list-inline-item"><a href="/archives.html">Archives</a></li>
    <li class="list-inline-item"><a href="/categories.html">Categories</a></li>
      <li class="list-inline-item"><a href="/tags.html">Tags</a></li>
      <li class="list-inline-item text-muted">|</li>
        <li class="list-inline-item"><a class="fab fa-github" href="https://github.com/jayascript/" target="_blank"></a></li>
        <li class="list-inline-item"><a class="fab fa-twitter" href="https://twitter.com/jayascript" target="_blank"></a></li>
        <li class="list-inline-item"><a class="fab fa-linkedin" href="https://www.linkedin.com/in/jayazhane/" target="_blank"></a></li>
        <li class="list-inline-item"><a class="fa fa-book" href="https://realpython.com/team/jayazhane/" target="_blank"></a></li>
  </ul>

  <p class="col-sm-6 text-sm-right text-muted">
    Generated by <a href="https://github.com/getpelican/pelican" target="_blank">Pelican</a>
    / <a href="https://github.com/nairobilug/pelican-alchemy" target="_blank">&#x2728;</a> © 2020 Jaya Z. Powell
  </p>
</div>    </div>
  </footer>

</body>

</html>